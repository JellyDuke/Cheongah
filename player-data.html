<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Thu Aug 14 2025 08:02:30 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="689a08b97ed36eb33a45e1d8" data-wf-site="68908363cfa0300d0c3b5c0d">
<head>
  <meta charset="utf-8">
  <title>player_data</title>
  <meta content="player_data" property="og:title">
  <meta content="player_data" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/dss-stupendous-site-03ea43.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <script src="config.js"></script>
  <!-- Supabase 라이브러리 추가 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="root">
    <div data-w-id="c4eeed9e-b99b-71e0-b66e-a78a7b4517fd" style="height:0px" class="top">
      <div class="top-left-wrapper">
        <div style="height:0px" class="top-logo">로고</div>
      </div>
      <div class="top-right-wrapper">
        <a href="index.html" class="button w-button">메인 페이지</a>
      </div>
    </div>
    <div class="container-player">
      <div class="player-data-input-field">
        <div class="form-block w-form">
          <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form" data-wf-page-id="689a08b97ed36eb33a45e1d8" data-wf-element-id="a310cce9-d974-9ba4-9e71-2e0a5e07bb0a">
            <div class="w-layout-vflex popupframe">
              <div class="w-layout-vflex first-data-filed">
                <h1 class="title-pop">유저 정보 기입</h1>
                <div class="block-box">
                  <div>닉네임</div><input class="player-data-input w-input" type="text" id="add-nickname" required="">
                </div>
                <div class="block-box">
                  <div>주포지션</div><input class="player-data-input w-input" type="text" id="add-main-position">
                </div>
                <div class="block-box">
                  <div>서브포지션</div><input class="player-data-input w-input" type="text" id="add-sub-position">
                </div>
                <div class="block-box">
                  <div>현티어</div><input class="player-data-input w-input" placeholder="ex) 골드4" type="text" id="add-current-tier">
                </div>
                <div class="block-box">
                  <div>최고티어</div><input class="player-data-input w-input" placeholder="ex) 골드3" type="text" id="add-peak-tier">
                </div>
                <div class="w-layout-vflex flex-btn-box-popup">
                  <a href="#" onclick="hidePopup()" class="check-btn cancle w-button">취소</a>
                  <a href="#" id="add-player-button" class="check-btn check w-button">확인</a>
                </div>
              </div>
              <div class="w-layout-vflex first-data-filed-detail">
                <div class="w-layout-vflex flex-container-pop">
                  <h1 class="title-pop">유저 상세정보</h1>
                  <div class="w-layout-vflex flex-area-box">
                    <div class="w-layout-vflex flex-box-data">
                      <div class="block-box">
                        <div>닉네임</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="닉네임을 입력해주세요." type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>주포지션</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="주포지션을 입력해주세요." type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>서브포지션</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="서브 포지션을 입력해주세요." type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>현티어</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="ex) 언랭, 골드4" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>최고티어</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="ex) 골드3" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>시작 티어</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="ex) 골드3" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>내전 티어</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="ex) 골드3" type="text" id="field" required="">
                      </div>
                    </div>
                    <div class="w-layout-vflex flex-box-data">
                      <div class="block-box">
                        <div>승률</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="58%" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>승</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="ex) 골드3" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>패</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="ex) 골드3" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>내전 MMR</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="1784" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>내전 MMR 보정값</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="1784" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>현재 LP</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="1784" type="text" id="field" required="">
                      </div>
                      <div class="block-box">
                        <div>칭호</div><input class="player-data-input w-input" maxlength="256" name="field" data-name="Field" placeholder="1784" type="text" id="field" required="">
                      </div>
                    </div>
                  </div>
                  <div class="w-layout-vflex flex-btn-box-popup">
                    <a href="#" class="check-btn cancle w-button">취소</a>
                    <a href="#" class="check-btn check w-button">확인</a>
                  </div>
                  <a href="#" class="remove-player-btn w-button">유저 삭제</a>
                </div>
                <div class="realy-remove-pop">
                  <div class="pop-remove">
                    <h1 class="danger-title">주의</h1>
                    <div>정말로 이 유저의 데이터를 삭제 하시겠습니까?</div>
                    <div class="w-layout-vflex flex-btn-box-popup">
                      <a href="#" class="check-btn cancle w-button">아니오</a>
                      <a href="#" class="check-btn check w-button">예</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="w-layout-vflex table-wrapper">
              <div class="table _80width">
                <div fs-table-element="table" fs-table-instance="fs-table-1" class="fs-table-1_instance">
                  <table class="fs-table-1_table">
                    <tbody class="fs-table-1_body">
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>아이언4</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>825</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>아이언3</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>875</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>아이언2</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>925</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>아이언1</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>975</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>브론즈4</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1025</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>브론즈3</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1075</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>브론즈2</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1125</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>브론즈1</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1175</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>실버4</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1225</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>실버3</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1275</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>실버2</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1325</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>실버1</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1375</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>골드4</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1425</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>골드3</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1475</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>골드2</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1525</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>골드1</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1575</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>플래티넘4</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1625</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>플래티넘3</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1675</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>플래티넘2</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1725</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>플래티넘1</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1775</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>에메랄드4</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1850</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>에메랄드3</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>1950</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>에메랄드2</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>2050</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>에메랄드1</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>2150</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>다이아몬드4</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>2250</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>다이아몬드3</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>2350</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>다이아몬드2</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>2450</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>다이아몬드1</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>2600</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>마스터</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>2850</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>그랜드마스터</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>3100</div>
                          </div>
                        </td>
                      </tr>
                      <tr class="fs-table-1_row">
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>챌린저</div>
                          </div>
                        </td>
                        <td class="fs-table-1_cell">
                          <div class="table-div">
                            <div>3200</div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="table">
                <div fs-table-element="table" fs-table-instance="fs-table" class="fs-table_instance">
                  <table class="fs-table_table">
                    <tbody class="fs-table_body">
                      <tr class="fs-table_row table-top">
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>닉네임</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>주포지션</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>서브포지션</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>승</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>패</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>현 티어</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>최고티어</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>내전 티어</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>현재 LP</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>칭호</div>
                          </div>
                        </td>
                        <td class="fs-table_cell">
                          <div class="table-div">
                            <div>상세정보</div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <a href="#" onclick="showPopup()" class="write-btn w-inline-block"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewbox="0 0 24 25" fill="none" app="ikonik" class="ikonik-oi5di">
        <path d="M6.6273 20.5959L4.56826 18.5368L3.78386 17.7524L2.99946 16.968C2.80336 17.2622 2.70531 17.6544 2.60726 17.9485L1.03847 22.753C0.940416 23.1452 1.03847 23.4393 1.23456 23.7335C1.43066 23.9296 1.82286 24.0276 2.21506 23.9296L7.0195 22.4588C7.4117 22.3608 7.70585 22.1647 8 22.0666L7.31365 21.3803L6.6273 20.5959Z" fill="currentColor" app="ikonik" class="path-n5p8l"></path>
        <path d="M21.9098 3.09167C21.0911 2.37662 20.17 1.96802 19.0443 1.96802C17.9185 1.96802 16.7927 2.47877 15.974 3.29597L4 15.3497L4.71639 16.0648L5.43279 16.7798L8.19602 19.5379L8.91241 20.253L9.6288 20.968L21.7052 8.91425C23.3426 7.27985 23.445 4.62393 21.9098 3.09167Z" fill="currentColor" app="ikonik" class="path-hukm2"></path>
      </svg></a>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=68908363cfa0300d0c3b5c0d" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script>
    function showPopup() {
      const popup = document.querySelector('.popupframe');
      const firstField = document.querySelector('.popupframe .first-data-filed');

      popup.style.display = 'flex';
      firstField.style.display = 'flex';
    }

    function hidePopup() {
        const popup = document.querySelector('.popupframe');
        const firstField = document.querySelector('.popupframe .first-data-filed');

        firstField.style.display = 'none';
        popup.style.display = 'none';
    }
  //리모컨
  const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
  /**
  * Supabase에서 모든 플레이어 데이터를 가져오는 새로운 함수
  */
  async function getPlayerData() {
    // 'players' 테이블에서 모든(*) 데이터를, 생성된 시간(created_at)을 기준으로 오름차순 정렬하여 가져옵니다.
    const { data, error } = await supabase
      .from('players')
      .select('*')
      .order('created_at', { ascending: true });

    if (error) {
      // 오류가 발생하면 콘솔에 기록하고, 사용자에게 알립니다.
      console.error("데이터 불러오기 오류:", error);
      onFailure(error); // 기존 오류 처리 함수 호출
    } else {
      // Supabase는 데이터를 객체 배열( [{nickname: 'a'}, {nickname: 'b'}] )로 반환합니다.
      // 기존 buildPlayerTable 함수가 이해하는 2차원 배열( [['a'], ['b']] )로 변환해줍니다.
      const a_playerData = data.map(player => [
          player.nickname,
          player.main_position,
          player.sub_position,
          player.current_tier,
          player.peak_tier,
          player.start_tier,
          player.internal_tier,
          player.winrate,
          player.wins,
          player.losses,
          player.mmr,
          player.mmr_adj,
          player.lp,
          player.title
      ]);
      // 변환된 데이터로 테이블을 그립니다.
      buildPlayerTable(a_playerData);
    }
  }

  // 3. 테이블을 그리는 함수 (새로 추가)
  function buildPlayerTable(playerData) {
    const tableBody = document.getElementById('player-list-body'); // HTML에 id="player-list-body"가 있는지 확인 필요
    if (!tableBody) return;
    
    // 기존 테이블 내용 비우기 (헤더 제외)
    while (tableBody.children.length > 1) {
      tableBody.removeChild(tableBody.lastChild);
    }

    playerData.forEach(player => {
      const nickname = String(player[0] || '');
      if (nickname === '') return;
      
      const row = document.createElement('tr');
      row.className = 'fs-table_row'; // HTML 클래스명에 맞게 수정 필요
      const rowData = [
        `<div>${nickname}</div>`,
        `<div>${String(player[1] || '')}</div>`, // 주포지션
        `<div>${String(player[2] || '')}</div>`, // 서브포지션
        `<div>${String(player[8] || 0)}</div>`,  // 승
        `<div>${String(player[9] || 0)}</div>`,  // 패
        `<div>${String(player[3] || '')}</div>`, // 현 티어
        `<div>${String(player[4] || '')}</div>`, // 최고티어
        `<div>${String(player[6] || 'N/A')}</div>`, // 내전 티어
        `<div>${String(player[12] || 0)}</div>`, // 현재 LP
        `<div>${String(player[13] || '')}</div>`, // 칭호
        `<a href="#" onclick="showPlayerDetails('${nickname.replace(/'/g, "\\'")}')" class="info-btn w-button">상세정보</a>`
      ];
      rowData.forEach(cellHtml => {
        const cell = document.createElement('td');
        cell.className = 'fs-table_cell'; // HTML 클래스명에 맞게 수정 필요
        cell.innerHTML = `<div class="table-div sub">${cellHtml}</div>`;
        row.appendChild(cell);
      });
      tableBody.appendChild(row);
    });
  }
  /**
 * '유저 정보 기입' 팝업의 데이터를 Supabase에 저장하는 새로운 함수
 */
  async function addNewPlayer() {
    // 1. 각 입력창에서 값을 읽어옵니다.
    const nickname = document.getElementById('add-nickname').value;
    const main_position = document.getElementById('add-main-position').value;
    const sub_position = document.getElementById('add-sub-position').value;
    const current_tier = document.getElementById('add-current-tier').value;
    const peak_tier = document.getElementById('add-peak-tier').value;

    // 2. 닉네임이 비어있는지 확인합니다.
    if (!nickname) {
      alert("닉네임은 필수 항목입니다.");
      return;
    }

    // 3. Supabase에 보낼 데이터 객체를 만듭니다. (키 이름은 DB의 열 이름과 같아야 합니다)
    const newPlayerData = {
      nickname: nickname,
      main_position: main_position,
      sub_position: sub_position,
      current_tier: current_tier,
      peak_tier: peak_tier,
      start_tier: current_tier, // 시작 티어는 현 티어와 동일하게 설정
      internal_tier: current_tier // 내전 티어도 현 티어와 동일하게 초기 설정
    };

    // 4. Supabase의 'players' 테이블에 데이터를 삽입(insert)합니다.
    const { data, error } = await supabase
      .from('players')
      .insert([newPlayerData]);

    if (error) {
      console.error("데이터 추가 오류:", error);
      onFailure(error);
    } else {
      alert("새로운 플레이어가 성공적으로 추가되었습니다!");
      hidePopup(); // 팝업 닫기
      getPlayerData(); // 테이블을 새로고침하여 추가된 플레이어를 바로 확인
    }
  }

  // 4. 오류 처리 함수 (새로 추가)
  function onFailure(error) {
    alert("오류가 발생했습니다: " + error.message);
  }

  // 페이지가 모두 로드된 후 실행
  document.addEventListener('DOMContentLoaded', function() {
    // 1. 페이지가 열리면 바로 전체 플레이어 목록을 불러옵니다.
    getPlayerData();

    // 2. '유저 정보 기입' 팝업의 '확인' 버튼에 addNewPlayer 함수를 연결합니다.
    const addBtn = document.getElementById('add-player-button');
    if (addBtn) {
      addBtn.addEventListener('click', function(event) {
        event.preventDefault(); // 링크의 기본 동작 방지
        addNewPlayer();
      });
    }
  });

  </script>
</body>
</html>